--

-- [[ TABLES ]] --

Skinshop = {
	["IDs"] = {
        { 2, "Maccer", 1100 }, 
        { 7, "Junger Typ", 1250 }, 
        { 9, "Politikerin", 3000 }, 
        { 10, "Großmutter", 1050 }, 
        { 11, "Wagenmeisterin", 2400 }, 
        { 12, "Frau mit Kleid", 3600 }, 
        { 14, "Mann mit Hemd 1", 2300 }, 
        { 15, "Mann mit Hemd 2", 2200 }, 
        { 20, "Mann mit Hemd 3", 3000 }, 
        { 17, "Geschäftsmann 1", 4500 }, 
        { 18, "Beachboy 1", 2000 }, 
        { 19, "Fischerhut", 2500 }, 
        { 21, "Mann mit Kette", 2800 }, 
        { 22, "Prollrapper", 2600 }, 
        { 23, "Beachboy 2", 2450 }, 
        { 24, "Los Santos Fan", 3600 }, 
        { 25, "Collegeboy", 3700 }, 
        { 26, "Laas Unlimited", 3690 }, 
        { 28, "Homosexueller", 1950 }, 
        { 29, "Drugdealer", 1100 }, 
        { 30, "Latino 1", 2700 }, 
        { 31, "Dicke Farmerin", 2500 }, 
        { 32, "Augenklappe", 1850 }, 
        { 34, "Cowboyfan", 1400 }, 
        { 35, "Golfer 1", 3000 }, 
        { 36, "Golfer 2", 3000 }, 
        { 37, "Golfer 3", 3000 }, 
        { 38, "Golferin", 2435 }, 
        { 39, "Großmutter", 2000 }, 
        { 40, "Elegante Frau 1", 2100 }, 
        { 41, "Azzlack Mädchen", 3200 }, 
        { 43, "Emre Orhan", 5000 }, 
        { 44, "Bärtiger Mann", 2200 }, 
        { 45, "Beachboy 3", 1500 }, 
        { 46, "Automobilkaufmann", 3200 }, 
        { 47, "Latino 2", 2100 }, 
        { 48, "Latino 3", 2000 }, 
        { 51, "Fahrradfahrer 1", 1950 }, 
        { 52, "Fahrradfahrer 2", 2000 }, 
        { 53, "Alte Dame 1", 1700 }, 
        { 54, "Alte Dame 2", 2000 }, 
        { 55, "Superstar", 3400 }, 
        { 56, "Asiatin 1", 2800 }, 
        { 57, "Geschäftsmann 2", 4500 }, 
        { 58, "Asiatischer Mann 1", 3100 }, 
        { 59, "Bankkaufmann 1", 4100 }, 
        { 60, "Asiatischer Mann 2", 2500 }, 
        { 66, "Collegeboy 2", 3500 }, 
        { 67, "Collegeboy 3", 3250 }, 
        { 68, "Priester", 2700 }, 
        { 69, "Frau mit Jumpsuit", 2750 }, 
        { 72, "Bärtiger Mann", 2220 }, 
        { 75, "Puffmutter", 1 }, 
        { 76, "Stewardess", 3450 }, 
        { 77, "Obdachlosin", 3450 }, 
        { 78, "Obdachloser 1", 3450 }, 
        { 79, "Obdachloser 2", 10 }, 
        { 88, "Golferin 2", 2250 }, 
        { 89, "Frau mit Kleid 1", 1150 }, 
        { 90, "Highschoolnutte", 4500 }, 
        { 91, "Frau mit Kleid 2", 3450 }, 
        { 93, "Blondine", 3780 }, 
        { 94, "Klaus Müller", 2950 }, 
        { 95, "Psychopath 1", 2100 }, 
        { 96, "Jogger", 1600 }, 
        { 97, "Bademeister", 3500 }, 
        { 98, "Buchhalter", 4800 }, 
        { 99, "Fahrradfahrer 3", 2200 }, 
        { 101, "Grüngekleideter Mann", 2890 }, 
        { 128, "Indianer", 1230 }, 
        { 129, "Vergewaltigerin", 1240 }, 
        { 130, "Alte Dame 3", 1000 }, 
        { 131, "Cowgirl 1", 1670 }, 
        { 132, "Mann mit Stirnband", 1399 }, 
        { 133, "Mechaniker", 2200 }, 
        { 134, "Obdachloser 3", 1650 }, 
        { 135, "Obdachloser 4", 1200 }, 
        { 136, "Hippie", 1450 }, 
        { 137, "Obdachloser 5", 1450 }, 
        { 138, "Bikini 1", 3500 }, 
        { 139, "Bikini 2", 3500 }, 
        { 140, "Bikini 3", 3500 }, 
        { 144, "Mundschutz 1", 2770 }, 
        { 146, "Mundschutz 2", 2300 }, 
        { 148, "Bankkauffrau 1", 4650 }, 
        { 150, "Bankkauffrau 2", 4870 }, 
        { 151, "Pony", 2100 }, 
        { 152, "Groupie", 2500 }, 
        { 153, "Bauleiter", 4230 }, 
        { 154, "Beachboy 3", 2600 }, 
        { 156, "Barbier", 2980 }, 
        { 157, "Farmerin 1", 2140 }, 
        { 158, "Farmer 1", 2890 }, 
        { 159, "Farmer 2", 1999 }, 
        { 160, "Psychopath 2", 2000 }, 
        { 161, "Farmer 3", 2560 }, 
        { 162, "Knickauge", 2560 }, 
        { 168, "Hotdogverkäufer", 2200 }, 
        { 170, "Asiatischer Mann 3", 3500 }, 
        { 171, "Portier 1", 4000 }, 
        { 172, "Portier 2", 4250 }, 
        { 176, "Mann mit Hemd 4", 3450 }, 
        { 177, "Irokese", 3450 }, 
        { 180, "Tättowierer", 3300 }, 
        { 182, "Obdachloser 6", 2150 }, 
        { 183, "Radikaler Mann", 2890 }, 
        { 184, "Latino 4", 3000 }, 
        { 190, "Sportlerin", 2750 }, 
        { 192, "Staff Memberin 1", 2999 }, 
        { 193, "Joggerin", 2700 }, 
        { 194, "Portier 3", 4250 }, 
        { 196, "Alte Dame 4", 1780 }, 
        { 197, "Alte Dame 5", 2430 }, 
        { 198, "Cowgirl 2", 3500 }, 
        { 199, "Frau mit Nachtkleid", 1760 }, 
        { 200, "Hinterwäldler", 1990 }, 
        { 201, "Cowgirl 3", 3100 }, 
        { 202, "Trucker", 1780 }, 
        { 206, "Schwuler Bodybuilder", 2250 }, 
        { 207, "Puffmutter 2", 1740 }, 
        { 210, "Samenspender", 2050 }, 
        { 211, "Staff Memberin 2", 3950 }, 
        { 212, "Obdachloser 7", 1600 }, 
        { 213, "Alkoholiker", 1800 }, 
        { 214, "Hübsche Frau 1", 4100 }, 
        { 215, "Hübsche Frau 2", 4000 }, 
        { 216, "Hübsche Frau 3", 4000 }, 
        { 217, "Erik Range", 4500 }, 
        { 218, "Farmerin 2", 2350 }, 
        { 219, "Elegante Frau 2", 3700 }, 
        { 223, "Latino 5", 4200 }, 
        { 225, "Asiatische Dame", 3200 }, 
        { 226, "Asiatin 2", 2600 }, 
        { 227, "Asiatischer Mann 4", 4250 }, 
        { 228, "Asiatischer Mann 5", 4500 }, 
        { 229, "Asiatischer Mann 5", 2900 }, 
        { 230, "Obdachloser 8", 2000 }, 
        { 231, "Schottin 1", 2200 }, 
        { 232, "Schottin 2", 2000 }, 
        { 233, "Junge Frau", 3200 }, 
        { 234, "Alter Mann 1", 2500 }, 
        { 235, "Alter Mann 2", 2600 }, 
        { 236, "Alter Mann 3", 2500 }, 
        { 239, "Obdachloser 9", 1780 }, 
        { 240, "Bankkaufmann 2", 3200 }, 
        { 241, "Dicker Mann 1", 3600 }, 
        { 242, "Dicker Mann 2", 2890 }, 
	},
};

-- [[ PED ROTIEREN ]] --

function Skinshop.rotate()
	setPedRotation(localPlayer,getPedRotation(localPlayer)+1);
end

Skinshop.enter = false

-- [[ PICKUPS ERSTELLEN ]] --

for i = 0,5 do
	local Skinshoppickup = createPickup(206.37506103516,-8.06911277771,1001.2109375,3,1275,50);
	local Skinshopped = createPed(185,204.85301208496,-8.1208639144897,1001.2109375,270);
	--local SkinshopCJPickup = createPickup(208.83451843262,-3.5264511108398,1001.2177734375,3,1275,50);
	setElementInterior(Skinshoppickup,5);
	setElementInterior(Skinshopped,5);
	--setElementInterior(SkinshopCJPickup,5);
	setElementDimension(Skinshoppickup,i);
	setElementDimension(Skinshopped,i);
	--setElementDimension(SkinshopCJPickup,i);
	
	addEventHandler("onClientPickupHit",Skinshoppickup,function(player)
		if(player == localPlayer)then
            Skinshop.id = 1;
            Skinshop.enter = true
			setElementPosition(localPlayer,200.49456787109,-12.205016136169,1001.2109375);
			setPedRotation(localPlayer,90);
			addEventHandler("onClientRender",root,Skinshop.rotate);
			addEventHandler("onClientRender",root,Skinshop.dxDraw);
			bindKey("backspace","down",Skinshop.close);
			bindKey("enter","down",Skinshop.buy);
			bindKey("arrow_l","down",Skinshop.left);
			bindKey("arrow_r","down",Skinshop.right);
			setCameraMatrix(210.87130737305,-12.047100067139,1001.6619873047,209.87181091309,-12.063181877136,1001.6893920898);
			toggleAllControls(false);
			setElementModel(localPlayer,Skinshop["IDs"][Skinshop.id][1]);
		end
	end)
	
	--[[addEventHandler("onClientPickupHit",SkinshopCJPickup,function(player)
		if(player == localPlayer)then
			setElementPosition(localPlayer,200.49456787109,-12.205016136169,1001.2109375);
			setPedRotation(localPlayer,90);
			addEventHandler("onClientRender",root,Skinshop.rotate);
			setCameraMatrix(210.87130737305,-12.047100067139,1001.6619873047,209.87181091309,-12.063181877136,1001.6893920898);
			toggleAllControls(false);
            bindKey("backspace","down",Skinshop.close);
		end
	end)]]--
end

-- [[ DX-DRAW ]] --

function Skinshop.dxDraw()
    dxDrawRectangle(493*(x/1280), 10*(y/1024), 294*(x/1280), 84*(y/1024), tocolor(28, 28, 28, 213), false)
    dxDrawRectangle(493*(x/1280), 10*(y/1024), 294*(x/1280), 19*(y/1024), tocolor(255, 100, 0, 255), false)
    dxDrawText("Skinshop", 493*(x/1280), 10*(y/1024), 787*(x/1280), 29*(y/1024), tocolor(255, 255, 255, 255), 1.00, "default-bold", "center", "center", false, false, false, false, false)
    dxDrawText(Skinshop["IDs"][Skinshop.id][2].."\nPreis: "..Skinshop["IDs"][Skinshop.id][3].."€", 503*(x/1280), 39*(y/1024), 777*(x/1280), 84*(y/1024), tocolor(255, 255, 255, 255), 1.20*(y/1024), "default-bold", "center", "center", false, false, false, false, false)
    dxDrawText("- Rechts und Links zum Wechseln des Skins\nLöschtaste zum Schließen und Enter zum Kaufen -", 493*(x/1280), 100*(y/1024), 787*(x/1280), 124*(y/1024), tocolor(255, 255, 255, 255), 1.00*(y/1024), "default-bold", "center", "center", false, false, false, false, false)
end

-- [[ RECHTS / LINKS ]] --

function Skinshop.left()
	if(Skinshop.id > 1)then
		Skinshop.id = Skinshop.id - 1;
		setElementModel(localPlayer,Skinshop["IDs"][Skinshop.id][1]);
	end
end

function Skinshop.right()
	if(Skinshop.id < #Skinshop["IDs"])then
		Skinshop.id = Skinshop.id + 1;
		setElementModel(localPlayer,Skinshop["IDs"][Skinshop.id][1]);
	end
end

-- [[ SKIN KAUFEN ]] --

function Skinshop.buy()
	triggerServerEvent("Skinshop.buy",localPlayer,Skinshop["IDs"][Skinshop.id][1],Skinshop["IDs"][Skinshop.id][3]);
end

-- [[ SCHLIESSEN ]] --

function Skinshop.close()
	unbindKey("backspace","down",Skinshop.close);
	unbindKey("enter","down",Skinshop.buy);
	unbindKey("arrow_l","down",Skinshop.left);
	unbindKey("arrow_r","down",Skinshop.right);
	removeEventHandler("onClientRender",root,Skinshop.dxDraw);
	removeEventHandler("onClientRender",root,Skinshop.rotate);
	setCameraTarget(localPlayer);
	setElementModel(localPlayer,getElementData(localPlayer,"Skin"));
    toggleAllControls(true);
    setElementDimension(localPlayer, 0)
    Skinshop.enter = false
end

-- [[ SPIELER STIRBT ]] --

addEventHandler("onClientPlayerWasted",root,function(player)
	if(player == localPlayer and Skinshop.enter)then
		Skinshop.close();
	end
end)