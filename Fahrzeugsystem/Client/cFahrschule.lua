--[[

	(c) FiNAL
	Xtreme Reallife
	2019

]]--


Fahrschule = {
    ["Theorie Preise"] = {
        ["Fuehrerschein"] = 2500,
        ["Motorradschein"] = 1250,
        ["Helikopterschein"] = 20000,
        ["Flugschein"] = 25000,
        ["Bootschein"] = 1000,
        ["LKWSchein"] = 3250,
    },
	["Theorie Fragen"] = {
		["Fuehrerschein"] = {
			["Informationstexte"] = {
				"Innerhalb von San Fierro darf - ausgenommen auf Autobahnen - maximal 80 km/h gefahren werden. Außerhalb von San Fierro existiert keine Geschwindigkeitsbegrenzung.",
				"Während der Fahrt ist die Nutzung des Handys ausnahmslos verboten.",
				"An Kreuzungen gilt die Vorfahrtsregel.",
				"Man darf nur auf öffentlich gekennzeichneten Parkplätzen und auf Privatgelände parken, wenn man das Einverständnis des Besitzers hat.",
			},
			["Fragen"] = {
				{"Was darfst du am Steuer nicht?","Das Lenkrad benutzen.","Hupen.","Ein Handy benutzen.","Ein Handy benutzen."},
				{"Wo darfst du deine Fahrzeuge abstellen?","Auf den Dächern fremder Häuser.","Auf öffentlich gekennzeichneten Parkplätzen.","In der Mitte eines Kreisels.","Auf öffentlich gekennzeichneten Parkplätzen."},
				{"Welche Regeln gilt an Kreuzungen?","Die Vorfahrtsregel","Die Gas geben und Zivilisten umfahren Regeln","Die Drive-By machen Regel","Die Vorfahrtsregel"},
				{"Wie schnell darf man außerhalb von San Fierro maximal fahren?","80 km/h","120 km/h","Es gibt keine Geschwindigkeitsbegrenzung.","Es gibt keine Geschwindigkeitsbegrenzung."},
			},
		},
		["Motorradschein"] = {
			["Informationstexte"] = {
				"Innerhalb von San Fierro darf - ausgenommen auf Autobahnen - maximal 80 km/h gefahren werden. Außerhalb von San Fierro existiert keine Geschwindigkeitsbegrenzung.",
				"Während der Fahrt ist die Nutzung des Handys ausnahmslos verboten.",
				"An Kreuzungen gilt die Vorfahrtsregel.",
				"Man darf nur auf öffentlich gekennzeichneten Parkplätzen und auf Privatgelände parken, wenn man das Einverständnis des Besitzers hat.",
			},
			["Fragen"] = {
				{"Was darfst du am Steuer nicht?","Das Lenkrad benutzen.","Hupen.","Ein Handy benutzen.","Ein Handy benutzen."},
				{"Wo darfst du deine Fahrzeuge abstellen?","Auf den Dächern fremder Häuser.","Auf öffentlich gekennzeichneten Parkplätzen.","In der Mitte eines Kreisels.","Auf öffentlich gekennzeichneten Parkplätzen."},
				{"Welche Regeln gilt an Kreuzungen?","Die Vorfahrtsregel","Die Gas geben und Zivilisten umfahren Regeln","Die Drive-By machen Regel","Die Vorfahrtsregel"},
				{"Wie schnell darf man außerhalb von San Fierro maximal fahren?","80 km/h","120 km/h","Es gibt keine Geschwindigkeitsbegrenzung.","Es gibt keine Geschwindigkeitsbegrenzung."},
			},
		},
		["Bootschein"] = {
			["Informationstexte"] = {
				"Fährst du mit einem Boot, musst du nicht auf deine Geschwindigkeit achten, da es kein Geschwindigkeitsbegrenzung gibt.",
				"Es ist nicht gestattet, Steine o.Ä. als Rampe zu verwenden. Generell sind Stunts verboten.",
				"Falls du anderen Booten begegnest, achte auf einen rücksichtsvollen Umgang und richte keinen Schaden an.",
				"Falls du eine Person siehst, die hilflos im Wasser schwimmt, solltest du ihr Hilfe anbieten und sie mit ans Land nehmen.",
			},
			["Fragen"] = {
				{"Was darf man mit seinem Boot nicht?","Auf dem Wasser fahren.","Stunts ausführen.","Breakdance tanzen.","Stunts ausführen."},
				{"Wie schnell darf man maximal mit seinem Boot fahren?","Es existiert keine Geschwindigkeitsbegrenzung.","120 km/h","180 km/h","Es existiert keine Geschwindigkeitsbegrenzung."},
				{"Was ist auf dem Wasser wichtig?","Andere Boote stets zerstören.","Ein rüchsichtsvoller Umgang mit anderen Booten.","Stunts machen.","Ein rüchsichtsvoller Umgang mit anderen Booten."},
				{"Was machst du, wenn du eine hilflose Person im Wasser siehst?","Mit der Bootsspitze gegen den Kopf fahren.","Hurensohn schreien.","Ihr Hilfe anbieten.","Ihr Hilfe anbieten."},
			},
		},
		["LKWSchein"] = {
			["Informationstexte"] = {
				"Innerhalb von San Fierro darf - ausgenommen auf Autobahnen - maximal 80 km/h gefahren werden. Außerhalb von San Fierro existiert keine Geschwindigkeitsbegrenzung.",
				"Während der Fahrt ist die Nutzung des Handys ausnahmslos verboten.",
				"An Kreuzungen gilt die Vorfahrtsregel.",
				"Man darf nur auf öffentlich gekennzeichneten Parkplätzen und auf Privatgelände parken, wenn man das Einverständnis des Besitzers hat.",
			},
			["Fragen"] = {
				{"Was darfst du am Steuer nicht?","Das Lenkrad benutzen.","Hupen.","Ein Handy benutzen.",3},
				{"Wo darfst du deine Fahrzeuge abstellen?","Auf den Dächern fremder Häuser.","Auf öffentlich gekennzeichneten Parkplätzen.","In der Mitte eines Kreisels.","Auf öffentlich gekennzeichneten Parkplätzen."},
				{"Welche Regeln gilt an Kreuzungen?","Die Vorfahrtsregel","Die Gas geben und Zivilisten umfahren Regeln","Die Drive-By machen Regel","Die Vorfahrtsregel"},
				{"Wie schnell darf man außerhalb von San Fierro maximal fahren?","80 km/h","120 km/h","Es gibt keine Geschwindigkeitsbegrenzung.","Es gibt keine Geschwindigkeitsbegrenzung."},
			},
		},
		["Helikopterschein"] = {
			["Informationstexte"] = {
				"Man darf nur auf Flughäfen und auf Privatgelände parken, wenn man das Einverständnis des Besitzers hat und man auf diesem ohne Probleme starten kann.",
				"Trifft man auf andere Flugzeuge, ist ein rücksichtsvoller Umgang mit diesen wichtig, um Unfälle zu vermeiden.",
				"Muss man notladen, ist es wichtig, Zivilisten nicht zu gefährden, weshalb man, falls möglich, stets ins Wasser fliegen sollte.",
				"Fliegst du mit deinem Flugzeug, musst du nicht auf deine Geschwindigkeit achten, da es kein Geschwindigkeitsbegrenzung gibt.",
			},
			["Fragen"] = {
				{"Was ist in der Luft wichtig?","Die Augen beim Fliegen stets geschlossen halten.","Ein rüchsichtsvoller Umgang mit anderen Flugobjekten.","Währe dem Fliegen Loopings machen.","Ein rüchsichtsvoller Umgang mit anderen Flugobjekten."},
				{"Wo darfst du unter anderem parken?","Auf Flughäfen.","Auf der Straße.","Auf fremden Grundstücken ohne die Erlaubnis des Besitzers.",1},
				{"Du musst notlanden, was tust du?","Einen Sturzflug einleiten.","Ins Wasser fliegen.","Das Flugzeug beleidigen, bis es explodiert.","Ins Wasser fliegen."},
				{"Wie schnell darf man maximal mit seinem Flugzeug fliegen?","120 km/h","180 km/h","Es existiert keine Geschwindigkeitsbegrenzung.","Es existiert keine Geschwindigkeitsbegrenzung."},
			},
		},
		["Flugschein"] = {
			["Informationstexte"] = {
				"Man darf nur auf Flughäfen und auf Privatgelände parken, wenn man das Einverständnis des Besitzers hat und man auf diesem ohne Probleme starten kann.",
				"Trifft man auf andere Flugzeuge, ist ein rücksichtsvoller Umgang mit diesen wichtig, um Unfälle zu vermeiden.",
				"Muss man notladen, ist es wichtig, Zivilisten nicht zu gefährden, weshalb man, falls möglich, stets ins Wasser fliegen sollte.",
				"Fliegst du mit deinem Flugzeug, musst du nicht auf deine Geschwindigkeit achten, da es kein Geschwindigkeitsbegrenzung gibt.",
			},
			["Fragen"] = {
				{"Was ist in der Luft wichtig?","Die Augen beim Fliegen stets geschlossen halten.","Ein rüchsichtsvoller Umgang mit anderen Flugobjekten.","Währe dem Fliegen Loopings machen.","Ein rüchsichtsvoller Umgang mit anderen Flugobjekten."},
				{"Wo darfst du unter anderem parken?","Auf Flughäfen.","Auf der Straße.","Auf fremden Grundstücken ohne die Erlaubnis des Besitzers.","Auf Flughäfen."},
				{"Du musst notlanden, was tust du?","Einen Sturzflug einleiten.","Ins Wasser fliegen.","Das Flugzeug beleidigen, bis es explodiert.","Ins Wasser fliegen."},
				{"Wie schnell darf man maximal mit seinem Flugzeug fliegen?","120 km/h","180 km/h","Es existiert keine Geschwindigkeitsbegrenzung.","Es existiert keine Geschwindigkeitsbegrenzung."},
			},
		},
	},
	["Marker"] = {
		["Fuehrerschein"] = {
			{-2026.4522705078,-72.129104614258,34.581558227539},
			{-2004.9459228516,69.506446838379,28.021923065186},
			{-2001.3944091797,305.67156982422,34.269680023193},
			{-2026.0277099609,322.30685424805,34.4255027771},
			{-2268.2377929688,322.13662719727,35.130535125732},
			{-2458.2211914063,201.61262512207,12.973905563354},
			{-2593.1291503906,159.52885437012,3.5853672027588},
			{-2606.0129394531,57.597663879395,3.5894310474396},
			{-2511.1408691406,38.200191497803,24.763023376465},
			{-2502.8874511719,-195.43237304688,24.879570007324},
			{-2795.2353515625,-208.67036437988,6.4464993476868},
			{-2811.4487304688,-470.00439453125,6.5360355377197},
			{-2892.9875488281,-1016.9309692383,8.9019765853882},
			{-2930.5375976563,-1769.1905517578,23.128265380859},
			{-2571.4250488281,-2153.7270507813,29.784582138062},
			{-2336.2724609375,-2624.6411132813,58.565887451172},
			{-1781.7359619141,-2613.2004394531,50.826530456543},
			{-1365.2465820313,-2933.2138671875,46.931541442871},
		},
		["Motorradschein"] = {
			{-2026.4522705078,-72.129104614258,34.581558227539},
			{-2004.9459228516,69.506446838379,28.021923065186},
			{-2001.3944091797,305.67156982422,34.269680023193},
			{-2026.0277099609,322.30685424805,34.4255027771},
			{-2268.2377929688,322.13662719727,35.130535125732},
			{-2458.2211914063,201.61262512207,12.973905563354},
			{-2593.1291503906,159.52885437012,3.5853672027588},
			{-2606.0129394531,57.597663879395,3.5894310474396},
			{-2511.1408691406,38.200191497803,24.763023376465},
			{-2502.8874511719,-195.43237304688,24.879570007324},
			{-2795.2353515625,-208.67036437988,6.4464993476868},
			{-2811.4487304688,-470.00439453125,6.5360355377197},
			{-2892.9875488281,-1016.9309692383,8.9019765853882},
			{-2930.5375976563,-1769.1905517578,23.128265380859},
			{-2571.4250488281,-2153.7270507813,29.784582138062},
			{-2336.2724609375,-2624.6411132813,58.565887451172},
			{-1781.7359619141,-2613.2004394531,50.826530456543},
		},
		["Bootschein"] = {
			{-1670.1276855469,-116.4967956543,1.0017385482788},
			{-1190.64453125,375.25442504883,0.93427336215973},
			{-982.88317871094,473.59231567383,1.007032752037},
			{-1054.6483154297,239.6875,0.91916954517365},
			{-1132.8870849609,24.72487449646,0.94842076301575},
			{-1086.3408203125,-314.80908203125,1.0170116424561},
			{-1317.0645751953,-706.99151611328,1.0709345340729},
			{-1578.6937255859,-717.21319580078,0.4378542304039},
		},
		["LKWSchein"] = {
			{-2026.4522705078,-72.129104614258,34.581558227539},
			{-2004.9459228516,69.506446838379,28.021923065186},
			{-2001.3944091797,305.67156982422,34.269680023193},
			{-2026.0277099609,322.30685424805,34.4255027771},
			{-2268.2377929688,322.13662719727,35.130535125732},
			{-2458.2211914063,201.61262512207,12.973905563354},
			{-2593.1291503906,159.52885437012,3.5853672027588},
			{-2606.0129394531,57.597663879395,3.5894310474396},
			{-2511.1408691406,38.200191497803,24.763023376465},
			{-2502.8874511719,-195.43237304688,24.879570007324},
			{-2795.2353515625,-208.67036437988,6.4464993476868},
			{-2811.4487304688,-470.00439453125,6.5360355377197},
			{-2892.9875488281,-1016.9309692383,8.9019765853882},
			{-2930.5375976563,-1769.1905517578,23.128265380859},
			{-2571.4250488281,-2153.7270507813,29.784582138062},
			{-2336.2724609375,-2624.6411132813,58.565887451172},
			{-1781.7359619141,-2613.2004394531,50.826530456543},
		},
		["Helikopterschein"] = {
			{-2062.5146484375,-55.588691711426,47.380928039551},
			{-2150.1306152344,12.281174659729,51.974048614502},
			{-2169.2788085938,184.70935058594,58.345874786377},
			{-2476.4953613281,115.97723388672,65.028823852539},
			{-2495.8842773438,61.043056488037,45.325073242188},
			{-2436.8950195313,-47.539897918701,48.757991790771},
		},
		["Flugschein"] = {
			{-1494.0738525391,-8.095362663269,25.024848937988},
			{-1289.6429443359,201.08731079102,72.786125183105},
			{-1134.8503417969,359.47634887695,118.46083068848},
			{-836.81048583984,664.44378662109,152.61730957031},
			{-636.18408203125,869.73345947266,108.67325592041},
			{-513.09014892578,1179.8961181641,21.7486743927},
			{-541.51135253906,1452.5382080078,58.231300354004},
			{-786.03314208984,1999.4206542969,99.373352050781},
			{-1053.9809570313,2186.0517578125,68.275352478027},
			{-1614.4342041016,2093.2424316406,86.040390014648},
			{-2195.6752929688,2035.8724365234,103.10849761963},
			{-2615.2673339844,2012.3892822266,41.630767822266},
			{-2795.4709472656,1728.4915771484,48.056327819824},
		},
	},
}

Fahrschule.pickup = createPickup(-2033.10413, -117.40224, 1035.17188, 3, 1239)
setElementInterior(Fahrschule.pickup, 3)
setElementAlpha(Fahrschule.pickup, 0)

local sx, sy = guiGetScreenSize()
local x, y = sx/2-350/2, sy/2-250/2
local ID = 0

Fahrschule.quest = function()
	Fahrschule.ask = function()
		dxClassClose(); destroyWindow("Fahrschule")
		ID = ID+1
		setTimer(function()
			Elements.window[1] = Window:create(788, 348, 342, 400, "Fahrschule", 1920, 1080)
			Elements.rectangle[1] = Rectangle:create(788, 421, 342, 47, 255, 125, 0, 150, 1920, 1080)
			if ID <= #Fahrschule["Theorie Fragen"][Fahrschule.schein]["Fragen"] then
				Elements.text[1] = Text:create(832, 437, 1096, 452, Fahrschule["Theorie Fragen"][Fahrschule.schein]["Fragen"][ID][1], 1920, 1080)
				drawGridlist("Fahrschule", "Gridlist", x+12.5, y+60, 322, 213, {{ "Antwortmöglichkeiten", 300}}, {{Fahrschule["Theorie Fragen"][Fahrschule.schein]["Fragen"][ID][2]}, {Fahrschule["Theorie Fragen"][Fahrschule.schein]["Fragen"][ID][3]}, {Fahrschule["Theorie Fragen"][Fahrschule.schein]["Fragen"][ID][4]}})
                Elements.button[1] = Button:create(850, 697, 222, 39, "Weiter", "Fahrschule.ask", 1920, 1080)
                setWindowDatas()		
            else
                if Elements.button[1] then Elements.button[1]:destroy() end
                if Elements.text[2] then Elements.text[2]:destroy() end
                Elements.text[1] = Text:create(832, 437, 1096, 452, "Resultat", 1920, 1080)
                Elements.text[2] = Text:create(809, 481, 1117, 692, "Glückwunsch! Du hast die therotische Prüfung bestanden!\nAls nächstes kannst du nun die praktische Prüfung absolvieren!\nViel Erfolg!", 1920, 1080)
                destroyWindow("Fahrschule")
				Elements.button[1] = Button:create(850, 697, 222, 39, "Beenden", "dxClassClose", 1920, 1080)
                setElementData(localPlayer, (Fahrschule.schein).."Theorie", 1)
				setWindowDatas()
			end
			setWindowDatas()
        end, 200, 1)
    end 
    addEvent("Fahrschule.ask", true)
    addEventHandler("Fahrschule.ask", root, Fahrschule.ask)

	dxClassClose();
    Elements.window[1] = Window:create(788, 348, 342, 400, "Fahrschule", 1920, 1080)
    Elements.rectangle[1] = Rectangle:create(788, 421, 342, 47, 255, 125, 0, 150, 1920, 1080)
    Elements.text[1] = Text:create(832, 437, 1096, 452, "Theoretische Prüfung für den "..(Fahrschule.schein), 1920, 1080)
    Elements.text[2] = Text:create(809, 481, 1117, 692, "Willkommen bei der theoretischen Prüfung des "..(Fahrschule.schein)..". Lies dir die folgenden Texte aufmerksam durch, um die Fragen, welche im Anschluss erscheinen, korrekt beantworten zu können. Es handelt sich um insgesamt vier Fragen, von denen du mindestens drei korrekt beantworten musst. Solltest du dies schaffen, kannst du anschließend die Praxisprüfung machen.", 1920, 1080)
    Elements.button[1] = Button:create(850, 697, 222, 39, "Weiter", "Fahrschule.ask", 1920, 1080)
    setWindowDatas()
end

Fahrschule.info = function()
    dxClassClose(); destroyWindow("Fahrschule")
    local schein = Fahrschule.schein
    Fahrschule.next = function()
        ID = ID + 1
        if(ID < #Fahrschule["Theorie Fragen"][schein]["Informationstexte"]+1)then
            Elements.text[2]:setText(Fahrschule["Theorie Fragen"][schein]["Informationstexte"][ID])
		else
			ID = 0
			Fahrschule.fails = 0
			Fahrschule.rights = 0
			Fahrschule.quest()
		end
    end
    addEvent("Fahrschule.next", true)
    addEventHandler("Fahrschule.next", root, Fahrschule.next)
    
    setTimer(function() Elements.window[1] = Window:create(788, 348, 342, 400, "Fahrschule", 1920, 1080)
        Elements.rectangle[1] = Rectangle:create(788, 421, 342, 47, 255, 125, 0, 150, 1920, 1080)
        Elements.text[1] = Text:create(832, 437, 1096, 452, "Theoretische Prüfung für den "..schein, 1920, 1080)
        Elements.text[2] = Text:create(809, 481, 1117, 692, "Willkommen bei der theoretischen Prüfung des "..schein..". Lies dir die folgenden Texte aufmerksam durch, um die Fragen, welche im Anschluss erscheinen, korrekt beantworten zu können. Es handelt sich um insgesamt vier Fragen, von denen du mindestens drei korrekt beantworten musst. Solltest du dies schaffen, kannst du anschließend die Praxisprüfung machen.", 1920, 1080)
        Elements.button[1] = Button:create(850, 697, 222, 39, "Weiter", "Fahrschule.next", 1920, 1080)
        setWindowDatas()
    end, 50, 1)
end
addEvent("Fahrschule.info", true)
addEventHandler("Fahrschule.info", root, Fahrschule.info)

Fahrschule.startTheorie = function()
    if getGridlistSelectedItem("Fahrschule", "Gridlist")[1] == "Klasse A (Auto)" then
        Fahrschule.schein = "Fuehrerschein"
    elseif getGridlistSelectedItem("Fahrschule", "Gridlist")[1] == "Klasse B (Motorrad)" then
        Fahrschule.schein = "Motorradschein"
    elseif getGridlistSelectedItem("Fahrschule", "Gridlist")[1] == "Klasse C (LKW)" then 
        Fahrschule.schein = "LKWSchein"
    elseif getGridlistSelectedItem("Fahrschule", "Gridlist")[1] == "CPL-H (Helikopter)" then 
        Fahrschule.schein = "Helikopterschein"
    elseif getGridlistSelectedItem("Fahrschule", "Gridlist")[1] == "ATPL (Flugzeug)" then 
        Fahrschule.schein = "Flugschein"
    elseif getGridlistSelectedItem("Fahrschule", "Gridlist")[1] == "IBS (Boot)" then 
        Fahrschule.schein = "Bootschein"
	end
	if getElementData(localPlayer, "Geld") >= Fahrschule["Theorie Preise"][Fahrschule.schein] then
		setElementData(localPlayer, "Geld", getElementData(localPlayer, "Geld")-(Fahrschule["Theorie Preise"][Fahrschule.schein]))
		Fahrschule.info()
	end
end
addEvent("Fahrschule.startTheorie", true)
addEventHandler("Fahrschule.startTheorie", root, Fahrschule.startTheorie)

Fahrschule.Praxis = function()
    dxClassClose()
    setTimer(function() Elements.window[1] = Window:create(788, 348, 342, 400, "Fahrschule", 1920, 1080)
    Elements.rectangle[1] = Rectangle:create(788, 421, 342, 47, 255, 125, 0, 150, 1920, 1080)
    Elements.text[1] = Text:create(832, 437, 1096, 452, "Welchen Schein möchtest du gerne machen?", 1920, 1080)
    Elements.button[1] = Button:create(850, 697, 222, 39, "Praxis beginnen", "Fahrschule.startPraxis", 1920, 1080)
    local f = getElementData(localPlayer, "FuehrerscheinPraxis") == 0 and "[ ]" or "[X]"
    local m = getElementData(localPlayer, "MotorradscheinPraxis") == 0 and "[ ]" or "[X]"
    local l = getElementData(localPlayer, "LKWScheinPraxis") == 0 and "[ ]" or "[X]"
    local b = getElementData(localPlayer, "BootscheinPraxis") == 0 and "[ ]" or "[X]"
    local h = getElementData(localPlayer, "HelikopterscheinPraxis") == 0 and "[ ]" or "[X]"
    local fl = getElementData(localPlayer, "FlugscheinPraxis") == 0 and "[ ]" or "[X]"
    drawGridlist("Fahrschule", "Gridlist", x+12.5, y+60, 322, 213, {{ "Schein", 150}, {"Preis", 75}, {"Vorhanden", 100} }, { {"Klasse A (Auto)", Fahrschule["Theorie Preise"]["Fuehrerschein"], f}, {"Klasse B (Motorrad)", Fahrschule["Theorie Preise"]["Motorradschein"], m}, {"Klasse C (LKW)", Fahrschule["Theorie Preise"]["LKWSchein"], l}, {"CPL-H (Helikopter)", Fahrschule["Theorie Preise"]["Helikopterschein"], h}, {"ATPL (Flugzeug)", Fahrschule["Theorie Preise"]["Flugschein"], fl}, {"IBS (Boot)", Fahrschule["Theorie Preise"]["Bootschein"], b} })
	setWindowDatas() end, 50, 1)
end
addEvent("Fahrschule.Praxis", true)
addEventHandler("Fahrschule.Praxis", root, Fahrschule.Praxis)

Fahrschule.Theorie = function()
    dxClassClose()
    setTimer(function() Elements.window[1] = Window:create(788, 348, 342, 400, "Fahrschule", 1920, 1080)
    Elements.rectangle[1] = Rectangle:create(788, 421, 342, 47, 255, 125, 0, 150, 1920, 1080)
    Elements.text[1] = Text:create(832, 437, 1096, 452, "Welchen Schein möchtest du gerne machen?", 1920, 1080)
    Elements.button[1] = Button:create(850, 697, 222, 39, "Theorie beginnen", "Fahrschule.startTheorie", 1920, 1080)
    local f = getElementData(localPlayer, "FuehrerscheinTheorie") == 0 and "[ ]" or "[X]"
    local m = getElementData(localPlayer, "MotorradscheinTheorie") == 0 and "[ ]" or "[X]"
    local l = getElementData(localPlayer, "LKWScheinTheorie") == 0 and "[ ]" or "[X]"
    local b = getElementData(localPlayer, "BootscheinTheorie") == 0 and "[ ]" or "[X]"
    local h = getElementData(localPlayer, "HelikopterscheinTheorie") == 0 and "[ ]" or "[X]"
    local fl = getElementData(localPlayer, "FlugscheinTheorie") == 0 and "[ ]" or "[X]"
    drawGridlist("Fahrschule", "Gridlist", x+12.5, y+60, 322, 213, {{ "Schein", 150}, {"Preis", 75}, {"Vorhanden", 100} }, { {"Klasse A (Auto)", Fahrschule["Theorie Preise"]["Fuehrerschein"], f}, {"Klasse B (Motorrad)", Fahrschule["Theorie Preise"]["Motorradschein"], m}, {"Klasse C (LKW)", Fahrschule["Theorie Preise"]["LKWSchein"], l}, {"CPL-H (Helikopter)", Fahrschule["Theorie Preise"]["Helikopterschein"], h}, {"ATPL (Flugzeug)", Fahrschule["Theorie Preise"]["Flugschein"], fl}, {"IBS (Boot)", Fahrschule["Theorie Preise"]["Bootschein"], b} })
    setWindowDatas() end, 50, 1)
end
addEvent("Fahrschule.Theorie", true)
addEventHandler("Fahrschule.Theorie", root, Fahrschule.Theorie)

Fahrschule.Window = function(player)
	if player == localPlayer then
		if isWindowOpen() then 
			Fahrschule.markerID = 0
			Elements.window[1] = Window:create(788, 348, 342, 382, "Fahrschule", 1920, 1080)
			Elements.rectangle[1] = Rectangle:create(788, 430, 342, 106, 0, 0, 0, 100, 1920, 1080)
			Elements.text[1] = Text:create(788, 407, 1130, 564, "Willkommen in der neuen Fahrschule von San Fierro!\nHier musst du zuerst eine Theorieprüfung absolvieren. Danach kannst du den praktischen Teil der Fahrprüfung abschließen, um deinen Schein zu bekommen.", 1920, 1080)
			Elements.text[2] = Text:create(788, 564, 1130, 601, "Möchtest du heute den theoretischen oder praktischen Teil absolvieren?", 1920, 1080)
			Elements.rectangle[2] = Rectangle:create(788, 559, 342, 45, 255, 125, 0, 50, 1920, 1080)
			Elements.button[1] = Button:create(798, 628, 152, 46, "Theorie", "Fahrschule.Theorie", 1920, 1080)
			Elements.button[2] = Button:create(967, 628, 152, 46, "Praxis", "Fahrschule.Praxis", 1920, 1080)
			setWindowDatas()
		end
	end
end 
addEventHandler("onClientPickupHit", Fahrschule.pickup, Fahrschule.Window)


Fahrschule.stopPraxis = function(type)
	if isElement(Fahrschule.marker) then
		destroyElement(Fahrschule.marker)
		destroyElement(Fahrschule.blip)
	end
end
addEvent("Fahrschule.stopPraxis", true)
addEventHandler("Fahrschule.stopPraxis", root, Fahrschule.stopPraxis)


Fahrschule.startPraxis = function(type)
    if getGridlistSelectedItem("Fahrschule", "Gridlist")[1] == "Klasse A (Auto)" then
        Fahrschule.schein = "Fuehrerschein"
    elseif getGridlistSelectedItem("Fahrschule", "Gridlist")[1] == "Klasse B (Motorrad)" then
        Fahrschule.schein = "Motorradschein"
    elseif getGridlistSelectedItem("Fahrschule", "Gridlist")[1] == "Klasse C (LKW)" then 
        Fahrschule.schein = "LKWSchein"
    elseif getGridlistSelectedItem("Fahrschule", "Gridlist")[1] == "CPL-H (Helikopter)" then 
        Fahrschule.schein = "Helikopterschein"
    elseif getGridlistSelectedItem("Fahrschule", "Gridlist")[1] == "ATPL (Flugzeug)" then 
        Fahrschule.schein = "Flugschein"
    elseif getGridlistSelectedItem("Fahrschule", "Gridlist")[1] == "IBS (Boot)" then 
        Fahrschule.schein = "Bootschein"
    end
	if getElementData(localPlayer, "Geld") >= Fahrschule["Theorie Preise"][Fahrschule.schein] then
		setElementData(localPlayer, "Geld", getElementData(localPlayer, "Geld")-(Fahrschule["Theorie Preise"][Fahrschule.schein]))
		Fahrschule.info()
		if isElement(Fahrschule.marker) then destroyElement(Fahrschule.marker) end
		if isElement(Fahrschule.blip) then destroyElement(Fahrschule.blip) end
		if getElementData(localPlayer, "Fahrschule") == false then
			if getElementData(localPlayer, (Fahrschule.schein).."Theorie") == 1 then
				triggerServerEvent("Fahrschule.constructor", localPlayer, Fahrschule.schein)
				setElementData(localPlayer, "Fahrschule", true)
			else
				infobox("Du hast die Theorieprüfung zu diesem Schein noch nicht vollzogen!", 0, 120, 0)
			end
		end
		if type then
			if Fahrschule.schein == "Flugschein" or Fahrschule.schein == "Helikopterschein" then
				mtype = {"corona", 0, 255, 4}
			else
				mtype = {"cylinder", 0.5, 150, 3}
			end
			Fahrschule.markerID = Fahrschule.markerID+1
			if Fahrschule.markerID > #Fahrschule["Marker"][Fahrschule.schein] then
				if Fahrschule.schein == "Fuehrerschein" then setElementData(localPlayer, "FuehrerscheinPraxis", 1)
				elseif Fahrschule.schein == "Motorradschein" then setElementData(localPlayer, "MotorradscheinPraxis", 1)
				elseif Fahrschule.schein == "LKWSchein" then setElementData(localPlayer, "LKWScheinPraxis", 1)
				elseif Fahrschule.schein == "Bootschein" then setElementData(localPlayer, "BootscheinPraxis", 1)
				elseif Fahrschule.schein == "Helikopterschein" then setElementData(localPlayer, "HelikopterscheinPraxis", 1)
				elseif Fahrschule.schein == "Flugschein" then setElementData(localPlayer, "FlugscheinPraxis", 1)
				end
				triggerServerEvent("Fahrschule.constructor", localPlayer, schein, "destroy")
			else
				dxClassClose(); destroyWindow("Fahrschule")
				local tbl = Fahrschule["Marker"][Fahrschule.schein][Fahrschule.markerID]
				Fahrschule.marker = createMarker(tbl[1], tbl[2], tbl[3]-mtype[2], mtype[1], mtype[4], 255, 0, 0, mtype[3])
				Fahrschule.blip = createBlip(tbl[1], tbl[2], tbl[3], 0, 2, 255, 0, 0)
				setElementDimension(Fahrschule.marker, getElementDimension(localPlayer))
				setElementDimension(Fahrschule.blip, getElementDimension(localPlayer))
				addEventHandler("onClientMarkerHit", Fahrschule.marker, function(player)
					if player == localPlayer then 
						Fahrschule.startPraxis("create")
					end
				end)
			end
		end
	end
end
addEvent("Fahrschule.startPraxis", true)
addEventHandler("Fahrschule.startPraxis", root, Fahrschule.startPraxis)