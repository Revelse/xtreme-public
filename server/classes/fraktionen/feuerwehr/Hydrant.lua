FireHydrant = inherit(Object)

FireHydrant.RANGE = 2.5

FireHydrant.HYDRANTS = {}

function FireHydrant:constructor(id,x,y,z,rotx,roty,rotz, dim, int)
	self.m_Object = createObject(id,x,y,z,rotx,roty,rotz)
	self.m_ColShape = ColShape.Sphere(x,y,z, FireHydrant.RANGE)
	self.m_Blip = Blip(x,y,z, 0, 2, 255,105,180)
	self.m_ColShape:setInterior(int)
	self.m_ColShape:setDimension(dim)
	self.m_Object:setInterior(int)
	self.m_Object:setDimension(dim)

	setElementVisibleTo(self.m_Blip, root, false)
	
	addEventHandler("onColShapeHit", self.m_ColShape, bind(self.Event_OnEnter, self))
	addEventHandler("onColShapeLeave", self.m_ColShape, bind(self.Event_OnLeave, self))
end

function FireHydrant:getBlip()
	return self.m_Blip
end

function FireHydrant:Event_OnEnter(hitElement, matchingDimension)
	if hitElement.type == "player" and matchingDimension then
		hitElement.m_IsInHydrant = true
	end
end

function FireHydrant:Event_OnLeave(hitElement)
	if hitElement.type == "player" then
		hitElement.m_IsInHydrant = false
	end
end

function FireHydrant.initAllInstances()
	for key, value in ipairs(FireHydrant.Instances) do
		FireHydrant.HYDRANTS[key] = FireHydrant:new(unpack(value))
	end
end

addCommandHandler("hydrant",
	function (player)
		local state = player:getData("HydrantsActive")
		for key, value in ipairs(FireHydrant.HYDRANTS) do
			setElementVisibleTo(value:getBlip(), player, not state)
		end
		player:setData("HydrantsActive", not state)
	end
)


FireHydrant.Instances = 
{
{1366,-2538.5000000,577.5000000,14.2000000,0.0000000,0.0000000,0.0000000, 0, 0} 		,
{1366,-2539.7000000,798.7000100,49.6000000,0.0000000,0.0000000,0.0000000, 0, 0}       ,
{1366,-2539.3999000,995.0999800,77.9000000,0.0000000,0.0000000,0.0000000, 0, 0}       ,
{1366,-2296.7000000,1043.0000000,55.3000000,0.0000000,0.0000000,0.0000000, 0, 0}      ,
{1366,-2411.0000000,964.7999900,45.1000000,0.0000000,0.0000000,0.0000000, 0, 0}       ,
{1366,-2496.2000000,748.4000200,34.8000000,0.0000000,0.0000000,0.0000000, 0, 0}       ,
{1366,-2242.6001000,577.9000200,34.8000000,0.0000000,0.0000000,0.0000000, 0, 0}       ,
{1366,-2241.3999000,330.2000100,34.9000000,0.0000000,0.0000000,0.0000000, 0, 0}       ,
{1366,-2266.5000000,40.0000000,34.9000000,0.0000000,0.0000000,0.0000000, 0, 0}        ,
{1366,-2178.2000000,-135.0000000,34.8000000,0.0000000,0.0000000,0.0000000, 0, 0}      ,
{1366,-2011.2000000,-102.1000000,35.3000000,0.0000000,0.0000000,0.0000000, 0, 0}      ,
{1366,-2026.0000000,63.0000000,28.0000000,0.0000000,0.0000000,0.0000000, 0, 0}        ,
{1366,-2596.3000000,673.2999900,27.4000000,0.0000000,0.0000000,0.0000000, 0, 0}       ,
{1366,-1877.8000000,989.5999800,35.1000000,0.0000000,0.0000000,0.0000000, 0, 0}       ,
{1366,-1826.9000000,1281.4000000,16.2000000,0.0000000,0.0000000,0.0000000, 0, 0}      ,
{1366,-1547.5000000,1015.3000000,6.8000000,0.0000000,0.0000000,0.0000000, 0, 0}       ,
{1366,-1571.5000000,687.9000200,6.8000000,0.0000000,0.0000000,0.0000000, 0, 0}        ,
{1366,-1699.9000000,416.5000000,6.8000000,0.0000000,0.0000000,0.0000000, 0, 0}        ,
{1366,-1823.1000000,360.3999900,16.8000000,0.0000000,0.0000000,0.0000000, 0, 0}       ,
{1366,-1771.2000000,-38.8000000,10.9000000,0.0000000,0.0000000,0.0000000, 0, 0}       ,
{1366,-2112.5000000,-407.0000000,35.1000000,0.0000000,0.0000000,0.0000000, 0, 0}      ,
{1366,-1559.0000000,-430.7999900,5.6000000,0.0000000,0.0000000,0.0000000, 0, 0}       ,
{1366,-1656.9000000,49.7000000,3.2000000,0.0000000,0.0000000,0.0000000, 0, 0}         ,
{1366,-823.7000100,1502.7000000,19.3000000,0.0000000,0.0000000,0.0000000, 0, 0}       ,
{1366,-181.1000100,1128.8000000,19.4000000,0.0000000,0.0000000,0.0000000, 0, 0}       ,
{1366,-317.7999900,1536.6000000,75.2000000,0.0000000,0.0000000,0.0000000, 0, 0}       ,
{1366,-1218.8000000,1822.3000000,41.3000000,0.0000000,0.0000000,0.0000000, 0, 0}      ,
{1366,-1469.6000000,2610.7000000,55.4000000,0.0000000,0.0000000,0.0000000, 0, 0}      ,
{1366,-766.2000100,2765.3000000,45.5000000,0.0000000,0.0000000,0.0000000, 0, 0}       ,
{1366,-247.8000000,2713.3999000,62.3000000,0.0000000,0.0000000,0.0000000, 0, 0}       ,
{1366,-2750.0000000,-60.8000000,6.8000000,0.0000000,0.0000000,0.0000000, 0, 0}        ,
{1366,-2525.8000000,-145.8000000,21.1000000,0.0000000,0.0000000,0.0000000, 0, 0}      ,
{1366,-2723.8999000,424.7999900,3.9000000,0.0000000,0.0000000,0.0000000, 0, 0}        ,
{1366,-2531.8999000,290.0000000,17.5000000,0.0000000,0.0000000,0.0000000, 0, 0}       ,
{1366, 110.16796875,-221.4150390625,1.378125, 0, 0, 0, 0, 0},
}

FireHydrant.initAllInstances()